javascript:(async()=>{let e=prompt("招待コードまたはリンクを入力してください");if(!e)return;e=e.trim().replace(/^https?:\/\//,"");const t=e.match(/(?:discord\.gg\/|discord\.com\/invite\/)?([a-zA-Z0-9-_]+)/);if(!t)return alert("無効な形式です");const n=t[1],a=await fetch(`https://discord.com/api/v9/invites/${n}?with_counts=true&with_expiration=true&with_permissions=true`);if(!a.ok)return alert("招待コードが無効です");const i=await a.json(),o=i.guild.id,r=i.profile?.badge_hash,s=i.guild.icon,c={name:i.guild.name,member_count:i.profile?.member_count??i.approximate_member_count??0,online_count:i.profile?.online_count??i.approximate_presence_count??0,boost_count:i.guild.premium_subscription_count??0,boost_level:i.guild.premium_tier??0,tag:i.profile?.tag??null,badge_url:r?`https://cdn.discordapp.com/guild-tag-badges/${o}/${r}.png`:null,icon_url:s?`https://cdn.discordapp.com/icons/${o}/${s}.png`:null},d=document.createElement("canvas");d.width=600,d.height=300;const l=d.getContext("2d");if(l.fillStyle="#2C2F33",l.fillRect(0,0,600,300),c.icon_url){const e=new Image;e.crossOrigin="anonymous",e.src=c.icon_url,await new Promise(t=>e.onload=t),l.drawImage(e,20,20,128,128)}l.fillStyle="#FFFFFF",l.font="bold 28px sans-serif",l.fillText(c.name,160,50),l.font="20px sans-serif",l.fillText(`メンバー: ${c.member_count}`,160,90),l.fillStyle="#43B581",l.fillText(`(オンライン: ${c.online_count})`,160+l.measureText(`メンバー: ${c.member_count} `).width,90),l.fillStyle="#FFFFFF",l.fillText(`ブースト: ${c.boost_count} (Lv${c.boost_level})`,160,120),l.fillText(`タグ: ${c.tag||"-"}`,160,150);if(c.badge_url){const e=new Image;e.crossOrigin="anonymous",e.src=c.badge_url,await new Promise(t=>e.onload=t),l.drawImage(e,160+l.measureText(`タグ: ${c.tag||"-"}`).width+8,128,24,24)}const h=260,g=50,f=600/2-h/2,u=300-g-30;l.fillStyle="#7289DA",l.beginPath(),l.moveTo(f+10,u),l.lineTo(f+h-10,u),l.quadraticCurveTo(f+h,u,f+h,u+10),l.lineTo(f+h,u+g-10),l.quadraticCurveTo(f+h,u+g,f+h-10,u+g),l.lineTo(f+10,u+g),l.quadraticCurveTo(f,u+g,f,u+g-10),l.lineTo(f,u+10),l.quadraticCurveTo(f,u,f+10,u),l.closePath(),l.fill(),l.fillStyle="#FFFFFF",l.font="bold 22px sans-serif",l.textAlign="center",l.textBaseline="middle",l.fillText("JOIN NOW",f+h/2,u+g/2);const p=document.createElement("a");p.download=`${c.name}_card.png`,p.href=d.toDataURL("image/png"),p.click();})();
